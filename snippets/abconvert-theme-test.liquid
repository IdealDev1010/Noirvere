<script id="ABConvert-theme-test">
var abconvertThemeTestLiquidVariables = { 
    abconvertThemeId : {{ theme.id }},
    abconvertDesignMode:{{request.design_mode}}
};

Object.keys(abconvertThemeTestLiquidVariables).forEach(function(key) { window[key] =
    abconvertThemeTestLiquidVariables[key]; });
var abconvertThemeTestDict = {"experimentId":"66b6ab29df6de82acd9e5ee6","testGroups":[{"name":"Original","percentage":50,"theme":{"id":"169720447299","name":"AB TEST B SIDE 04.08","screenshotUrl":"https://abconvert-public-image-production.s3.us-east-1.amazonaws.com/60387c-5.myshopify.com-1722816432426","_id":"66b6ab29df6de82acd9e5ee8"},"paymentCustomization":[],"deliveryCustomization":[],"checkoutUICustomization":[],"shippingCost":2,"profitMargin":30,"_id":"66b6ab29df6de82acd9e5ee7","testProducts":[]},{"name":"Variant","percentage":50,"theme":{"id":"169912631619","name":"AB TEST C SIDE 04.08","screenshotUrl":"https://abconvert-public-image-production.s3.us-east-1.amazonaws.com/60387c-5.myshopify.com-1723247243095","_id":"66b6ab29df6de82acd9e5eea"},"paymentCustomization":[],"deliveryCustomization":[],"checkoutUICustomization":[],"shippingCost":2,"profitMargin":30,"_id":"66b6ab29df6de82acd9e5ee9","testProducts":[]}],"themeIdMap":{"169720447299":true,"169912631619":true},"startTime":"2024-08-09T23:50:01.984Z"};
 window.abconvertThemeTestDict = abconvertThemeTestDict;
(()=>{"use strict";async function e(){localStorage.getItem("abconvert-country")||await async function(){const e=await fetch("https://app.abconvert.io/api/public/get-country-code",{method:"GET",mode:"cors"}),t=(await e.json()).countryCode;t&&(console.log("successfully set country code: ",t),localStorage.setItem("abconvert-country",t))}()}const t=[/Googlebot/,/Googlebot-Image/,/Googlebot-Video/,/Googlebot-News/,/Storebot-Google/,/Google-InspectionTool/,/GoogleOther/,/Google-Extended/,/APIs-Google/,/AdsBot-Google-Mobile/,/AdsBot-Google/,/Mediapartners-Google/,/Google-Safety/,/FeedFetcher-Google/,/GoogleProducer/,/Bingbot/,/Slurp/,/DuckDuckBot/,/Baiduspider/,/YandexBot/,/facebot/,/Twitterbot/],n={NEW:"new",RETURNING:"returning",ALL:"all"};function o(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function r(e,t,n){var o,r=new Date;r.setTime(r.getTime()+n),o="; expires="+r.toUTCString(),document.cookie=e+"="+(t||"")+o+"; path=/"}function i(){let e=o("abconvert-landing-page");return e||(e=window.location.pathname,r("abconvert-landing-page",e,18e5)),e}function a(){let e=o("abconvert-session");return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),r("abconvert-session",e,18e5)),e}function c(e){const t=(new Date).valueOf(),o=localStorage.getItem("abconvert-first-visit-time")?Number(localStorage.getItem("abconvert-first-visit-time")):t;return localStorage.getItem("abconvert-first-visit-time")||localStorage.setItem("abconvert-first-visit-time",t.toString()),o>(e=new Date(e).valueOf())?n.NEW:n.RETURNING}let s,l,d=0,u=0,m=!1;const g=()=>{m?(m=!1,l=(new Date).getTime(),u+=(l-s)/1e3):(m=!0,s=(new Date).getTime())};window.addEventListener("scroll",(()=>{d+=1.8,g()}));const h="https://app.abconvert.io";var v=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((o=o.apply(e,t||[])).next())}))},w=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};v(void 0,void 0,void 0,(function(){function n(){var e=new URLSearchParams(location.search),t=e.get("preview"),n=e.get("countryCode");return n&&window.sessionStorage.setItem("abconvert-country",n),t&&!isNaN(Number(t))?(window.sessionStorage.setItem("abconvert-preview-number",t),t):window.sessionStorage.getItem("abconvert-preview-number")}function s(e,t,n){switch(t){case f.MATCHES_EXACTLY:return e===n;case f.MATCHES_REGEX_EXACTLY:return new RegExp(n).test(e);case f.CONTAINS:return e.includes(n);case f.ENDS_WITH:return e.endsWith(n);case f.STARTS_WITH:return e.startsWith(n);case f.NOT_MATCH_EXACTLY:return e!==n;case f.NOT_MATCH_REGEX_EXACTLY:return!new RegExp(n).test(e);case f.NOT_CONTAINS:return!e.includes(n);case f.NOT_ENDS_WITH:return!e.endsWith(n);case f.NOT_STARTS_WITH:return!e.startsWith(n);default:return!1}}function l(e){var t,o,r,i,a=(null===(o=null===(t=window.Shopify)||void 0===t?void 0:t.theme)||void 0===o?void 0:o.id)||window.abconvertThemeId,l=e.testGroups,d=e.experimentId,u=e.themeTestConditionType,m=e.themeTestConditions,g=e.startTime,h=(r=l,(i=n())&&!isNaN(Number(i))?Number(i)>=r.length?0:Number(i):function(e){var t,n=function(){var e=localStorage.getItem("abconvert-seed");return null==e&&(e=Math.floor(100*Math.random()).toString(),localStorage.setItem("abconvert-seed",e)),e}(),o=0;for(t=0;t<e.length;++t)if(o+=e[t].percentage,Number(n)<o)return t;return t}(r)),v=!0;if(!e.selectedVistorType||e.selectedVistorType==c(g)){u&&(u===p.EXCLUDE&&(v=!m.some((function(e){return s(window.location.pathname,e.condition,e.value)}))),u===p.INCLUDE&&(v=m.some((function(e){return s(window.location.pathname,e.condition,e.value)})))),v||(h=0),function(){var e=n();return e&&!isNaN(Number(e))}()||!localStorage.getItem("abconvert-theme-test-".concat(d))&&v&&localStorage.setItem("abconvert-theme-test-".concat(d),JSON.stringify({experimentId:d,groupIndex:h,startTime:g}));var w=l[h].theme;if(w.id!=a){window.localStorage.setItem("abconvert-is-redirected-test-theme","true");var f=new URLSearchParams(location.search);f.set("preview_theme_id",w.id.toString()),location.search=f.toString()}}}function m(e){var t,n,s=(null===(n=null===(t=window.Shopify)||void 0===t?void 0:t.theme)||void 0===n?void 0:n.id)||window.abconvertThemeId,l=e.experimentId,m=e.themeIdMap,v=e.testGroups,w=h+"/api/analytics/theme/originalview",p=h+"/api/analytics/theme/click",f=h+"/api/analytics/theme/bounce",T=h+"/api/analytics/theme/staying-time";if(m[window.abconvertThemeId]&&(!e.selectedVistorType||e.selectedVistorType===c(e.startTime))){var b=localStorage.getItem("abconvert-theme-test-".concat(l)),y=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}("abconvert-theme-test-stay-time-recorded-".concat(l));if(b){var S=JSON.parse(b).groupIndex;v[S].theme.id==s&&(async function(e,t,n,o){const r=a(),s=window.location.pathname.toString(),l=i();fetch(e,{method:"POST",body:JSON.stringify({sessionId:r,experimentId:t,groupIndex:n,visitorType:c(o),pathName:s,landingPage:l}),keepalive:!0})}(w,l,S,e.startTime),function(e,t,n,o){const r=window.location.pathname.toString(),s=i();window.addEventListener("click",(i=>{if("A"===i.target.tagName){const l=i.target.getAttribute("href");console.log(l);const d=a();fetch(e,{method:"POST",body:JSON.stringify({sessionId:d,experimentId:t,groupIndex:n,link:l,visitorType:c(o),pathName:r,landingPage:s}),keepalive:!0})}}))}(p,l,S,e.startTime),function(e,t,n,o){const r=window.location.pathname.toString(),s=i();let l=!1;window.addEventListener("scroll",(()=>{l=!0})),window.addEventListener("click",(()=>{l=!0})),window.addEventListener("beforeunload",(async()=>{if(!l){const i=a();fetch(e,{method:"POST",body:JSON.stringify({sessionId:i,experimentId:t,groupIndex:n,visitorType:c(o),pathName:r,landingPage:s}),keepalive:!0})}}))}(f,l,S,e.startTime),y||function(e,t,n,s,l){const m=(new Date).getTime(),h=window.location.pathname.toString(),v=i();o(`abconvert-${t}-test-stay-time-recorded-${n}`)||(r(`abconvert-${t}-test-stay-time-recorded-${n}`,!0,72e5),setInterval((()=>{(new Date).getTime()-m>39e3&&g()}),39e3),window.addEventListener("beforeunload",(async()=>{const t=a(),o=(new Date).getTime(),r=(o-m)/1e3,i=(o-m)/1e3-d/1e3-u;fetch(e,{method:"POST",body:JSON.stringify({stayingTime:r,stayingTimeAdjusted:i,sessionId:t,experimentId:n,groupIndex:s,visitorType:c(l),pathName:h,landingPage:v}),keepalive:!0})})))}(T,"theme",l,S,e.startTime))}}}var p,f,T;return w(this,(function(n){p={EXCLUDE:"exclude",INCLUDE:"include"},f={MATCHES_EXACTLY:"match_exactly",MATCHES_REGEX_EXACTLY:"match_regex_exactly",CONTAINS:"contains",ENDS_WITH:"ends_with",STARTS_WITH:"starts_with",NOT_MATCH_EXACTLY:"not_match_exactly",NOT_MATCH_REGEX_EXACTLY:"not_match_regex_exactly",NOT_CONTAINS:"not_contains",NOT_ENDS_WITH:"not_ends_with",NOT_STARTS_WITH:"not_starts_with"},T=function(){var e;localStorage.getItem("shopURL")||window.Shopify&&window.Shopify.shop&&(e=window.Shopify.shop,localStorage.setItem("shopURL",e),console.log("[LOG] Template test: set shop url"))},console.log("[ABConvert] Running ABConvert Theme test 1.0.0 - hide preview bar + add country filter and device filter");try{if(window.Shopify?.designMode||window.abconvertDesignMode)return[2];localStorage.getItem("abconvert-user-seed")||localStorage.setItem("abconvert-user-seed","0"),T(),i(),document.addEventListener("DOMContentLoaded",T),function(){var n,o;v(this,void 0,void 0,(function(){var r,i,a,c,s,d,u;return w(this,(function(g){switch(g.label){case 0:return(()=>{const e=navigator.userAgent;return t.some((t=>t.test(e)))})()?[2]:window.abconvertThemeTestDict?(r=window.abconvertThemeTestDict.themeIdMap,i=new URLSearchParams(location.search).get("preview_theme_id")||"",a=(null===(o=null===(n=window.Shopify)||void 0===n?void 0:n.theme)||void 0===o?void 0:o.id)||window.abconvertThemeId,i&&!r[Number(i)]||a&&!r[a]?[2]:window.abconvertThemeTestDict.isFilteredByCountry?[4,e()]:[3,2]):[3,3];case 1:g.sent(),g.label=2;case 2:if((c=document.createElement("style")).textContent="\n                    #preview-bar-iframe {\n                        display: none !important;\n                    }\n                    /* Add more CSS rules here */\n                ",document.head.appendChild(c),window.abconvertThemeTestDict.isFilteredByCountry&&(s=localStorage.getItem("abconvert-country"),!window.abconvertThemeTestDict.filteredCountries.includes(s)))return[2];if(window.abconvertThemeTestDict.isFilteredByDevice&&(d=function(){const e=navigator.userAgent||window.opera;return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)?"mobile":/ipad|playbook|silk/i.test(e)?"tablet":"desktop"}(),u=window.abconvertThemeTestDict.selectedDevice,d!==u))return[2];l(window.abconvertThemeTestDict),m(window.abconvertThemeTestDict),g.label=3;case 3:return[2]}}))}))}()}catch(e){console.log("[ABConvert] Theme test error: ",e.message)}return[2]}))}))})();
</script>